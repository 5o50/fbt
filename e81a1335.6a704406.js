/*! For license information please see e81a1335.6a704406.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{162:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return u}));var r=n(1),a=n(9),o=(n(170),n(169)),i={id:"getting_started_react_native",title:"Getting Started with React Native",sidebar_label:"React Native"},l={id:"getting_started_react_native",title:"Getting Started with React Native",description:"## Try the Demo",source:"@site/../docs/getting_started_react_native.md",permalink:"/fbt/docs/getting_started_react_native",lastUpdatedBy:"John Watson",lastUpdatedAt:1587087978,sidebar_label:"React Native",sidebar:"docs",previous:{title:"Getting Started on web",permalink:"/fbt/docs/getting_started_on_web"},next:{title:"The FBT API",permalink:"/fbt/docs/api_intro"}},c=[{value:"Try the Demo",id:"try-the-demo",children:[]},{value:"Adding FBT an it&#39;s dependencies",id:"adding-fbt-an-its-dependencies",children:[]},{value:"Android",id:"android",children:[]},{value:"iOS",id:"ios",children:[]},{value:"Changes in the JavaScript layer",id:"changes-in-the-javascript-layer",children:[]},{value:"<strong>Notes</strong>",id:"notes",children:[]}],s={rightToc:c},b="wrapper";function u(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)(b,Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"try-the-demo"},"Try the Demo"),Object(o.b)("p",null,"Check out our ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/facebook/fbt/tree/rn-demo-app"}),"React Native Demo app"),".\nCheck out our ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://www.npmjs.com/package/react-native-fbt"}),"FBT Native Module")," on NPM."),Object(o.b)("h2",{id:"adding-fbt-an-its-dependencies"},"Adding FBT an it's dependencies"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Add all dependencies"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"p"},"yarn add babel-preset-react-native shelljs fbt babel-plugin-fbt babel-plugin-fbt-runtime @babel/node fb-tiger-hash react-native-fbt --dev"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Make sure your fbt has a version greater than ",Object(o.b)("inlineCode",{parentName:"p"},'"^0.10.0"'))))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Create a .babelrc or babel.config.js file to add the transformation plugins with the following content:"))),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),'  {\n   "plugins": ["babel-plugin-fbt", "babel-plugin-fbt-runtime"],\n   "presets": ["module:metro-react-native-babel-preset"]\n  }\n')),Object(o.b)("h2",{id:"android"},"Android"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Update your Android main activity so that the app reloads whenever the user changes the locale",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"You can find an example in the ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/facebook/fbt/blob/rn-demo-app/android/app/src/main/java/com/fbtrndemoapp/MainActivity.java#L39"}),"rn-demo-app")))),Object(o.b)("li",{parentName:"ul"},'Add "locale|layoutDirection" in android:configChanges in the AndroidManifest.xml. This will restart the app whenever the language of the device changes and will load the correct translations.',Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},'android:configChanges="keyboard|keyboardHidden|orientation|screenSize|screenLayout|layoutDirection|locale"')))),Object(o.b)("h2",{id:"ios"},"iOS"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"After adding the native module, run ",Object(o.b)("inlineCode",{parentName:"li"},"cd ios/ && pod install")," to add the new module to your app"),Object(o.b)("li",{parentName:"ul"},"Add the languages you want your app to support",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Name the files Localizable.strings as this is what the native module will look for when looking for translations")))),Object(o.b)("h2",{id:"changes-in-the-javascript-layer"},"Changes in the JavaScript layer"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Copy the files in the ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/facebook/fbt/tree/rn-demo-app/i18n"}),"i18n folder")," of the demo app. Find an explanation of each file below:",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Create a JS wrapper around the native module\n",Object(o.b)("em",{parentName:"li"}," rn-demo-app: ",Object(o.b)("a",Object(r.a)({parentName:"em"},{href:"https://github.com/facebook/fbt/blob/rn-demo-app/i18n/FbtI18nNativeAssets.js"}),"FbtI18nNativeAssets"))," The native module ",Object(o.b)("inlineCode",{parentName:"li"},"react-native-fbt")," is used to read translations from Android resources\n",Object(o.b)("em",{parentName:"li"}," This module reads translations from android/raw-xx-rXX/localizable.json files with the following structure (note that the strings need to be json-escaped):\n",Object(o.b)("inlineCode",{parentName:"em"},'{\n"2keTtB": "\\"Escanear c\xf3digo QR\\"",\n"24DJ19": "\\"Subir\\"",\n}'))," The native module ",Object(o.b)("inlineCode",{parentName:"li"},"react-native-fbt")," is used to read translations from iOS resources\n* This module reads translations from the Localizable.strings files added for each language. These are regular iOS translations files (note that the strings need to be json-escaped):")))),Object(o.b)("p",null,'"2keTtB" = "\\"Escanear c\xf3digo QR\\"",\n"24DJ19" = "\\"Subir\\"",'),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"       * The hash value is the [jenkins hash](https://github.com/facebook/fbt/blob/master/packages/babel-plugin-fbt/jenkinsHash.js) generated by [the collectFBT script](https://github.com/facebook/fbt/blob/52c971671fbb8f096eedf7adba55fa35c4a6d13f/packages/babel-plugin-fbt/bin/collectFBT.js#L51-L52L52)\n        * More info here: https://www.npmjs.com/package/fbt-rn-android-native\n\n* Create your custom payload getter to inject in FBT\n    * rn-demo-app: [CustomTranslationPayloadGetter](https://github.com/facebook/fbt/blob/rn-demo-app/i18n/CustomTranslationPayloadGetter.js)\n\n* Create a NativeFbtModule.js file to encapsulate the native module:\n    * rn-demo-app: [NativeFbtModule](https://github.com/facebook/fbt/blob/rn-demo-app/i18n/NativeFbtModule.js)\n\n* Create an fbtInit component to inject the CustomPayloadGetter before we execute any JS code. This is needed if you have any strings that need to be statically available in the app.\n    * rn-demo-app: [fbtInit](https://github.com/facebook/fbt/blob/rn-demo-app/i18n/fbtInit.js)\n")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Import the fbtInit component in the index.js main file"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"It's important this is the first module we import so that we make sure the CustomPayloadGetter is set before making any fbt calls"),Object(o.b)("li",{parentName:"ul"},"rn-demo-app: ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/facebook/fbt/blob/rn-demo-app/index.js#L25"}),"index.js")))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Add the fbt scripts to your package.json file:"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Add the ",Object(o.b)("inlineCode",{parentName:"li"},"manifest")," script call in package.json. This script looks for all the files that import fbt and creates the input for the collectFBT script below.")))),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),'  "manifest": "babel-node ./node_modules/babel-plugin-fbt/bin/manifest --src src/ --enum-manifest i18n/fbt/.enum_manifest.json --src-manifest i18n/fbt/.src_manifest.json"\n')),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Add the ",Object(o.b)("inlineCode",{parentName:"li"},"collectFBT")," script call in package.json. This script collects all fbt-wrapped strings into a file for you to translate.")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),'  "collect-fbts": "babel-node ./node_modules/babel-plugin-fbt/bin/collectFBT --hash-module \'fb-tiger-hash/src/hashPhrases\' --react-native-mode --manifest < i18n/fbt/.src_manifest.json > i18n/fbt/.source_strings.json"\n')),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Add the ",Object(o.b)("inlineCode",{parentName:"li"},"translate")," script call in package.json. This script should be used after all strings are translated. It\u2019ll generate a single file with all translations that we then need to translate into Android specific localizable.json files. See the input format ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/facebook/fbt/tree/rn-demo-app/i18n/fbt/translationScriptInput"}),"here"),".")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),'  "translate-fbts": "babel-node ./node_modules/babel-plugin-fbt/bin/translate.js --jenkins --source-strings i18n/fbt/.source_strings.json --translations i18n/fbt/translationScriptInput/*.json > i18n/fbt/translatedFbts.json"\n')),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"[Android]"," Generate localizable.json files for each language and add them to the corresponding ",Object(o.b)("inlineCode",{parentName:"p"},"res/[raw-xx-rXX](https://github.com/facebook/fbt/tree/rn-demo-app/android/app/src/main/res/raw-es-rES)")," folder (xx is the ISO 2 Letter Language Codes)"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"You can find a helper script in the rn-demo-app: ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/facebook/fbt/blob/rn-demo-app/i18n/scripts/generate-android-localizables.js"}),"generate-android-localizable.js")),Object(o.b)("li",{parentName:"ul"},'The script takes in the translation script output and generates localizable.json files in the "android/res" folder. See it in the ',Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/facebook/fbt/tree/rn-demo-app/android/app/src/main/res/raw-es-rES"}),"rn-demo-app")))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"[iOS]"," Generate Localizable.strings files for each language and add them to the corresponding ",Object(o.b)("inlineCode",{parentName:"p"},"xx.lproj(https://github.com/facebook/fbt/tree/rn-demo-app/ios/es.lproj)")," folder (xx is the ISO 2 Letter Language Codes)"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"You can take the Android helper script and adapt it for the iOS version.")))),Object(o.b)("h2",{id:"notes"},Object(o.b)("strong",{parentName:"h2"},"Notes")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"The ",Object(o.b)("inlineCode",{parentName:"li"},"generate-android-localizable.js")," script creates the main ",Object(o.b)("inlineCode",{parentName:"li"},"res/raw/localizable.json")," with the content: ",Object(o.b)("inlineCode",{parentName:"li"},"{}"),". This empty file is necessary so that Android generates the ",Object(o.b)("inlineCode",{parentName:"li"},"R.raw.localizable")," resource. If you don\u2019t use the script, please, create the file ",Object(o.b)("inlineCode",{parentName:"li"},"res/raw/localizable.json")," manually with an empty json as mentioned before."),Object(o.b)("li",{parentName:"ul"},"There's a known bug when using ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/facebook/fbt/issues/127"}),"fbt in React Native components' properties"),". The solution is to call ",Object(o.b)("inlineCode",{parentName:"li"},".toString()")," after the fbt() call:",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},'<TextInput placeholder={fbt("Text", "Description").toString()} />'))))))}u.isMDXComponent=!0},169:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n(0),a=n.n(r),o=a.a.createContext({}),i=function(e){var t=a.a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):Object.assign({},t,e)),n},l=function(e){var t=i(e.components);return a.a.createElement(o.Provider,{value:t},e.children)};var c="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(e,["components","mdxType","originalType","parentName"]),b=i(n),u=r,p=b[l+"."+u]||b[u]||s[u]||o;return n?a.a.createElement(p,Object.assign({},{ref:t},c,{components:n})):a.a.createElement(p,Object.assign({},{ref:t},c))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=b;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:r,i[1]=l;for(var u=2;u<o;u++)i[u]=n[u];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},170:function(e,t,n){"use strict";e.exports=n(171)},171:function(e,t,n){"use strict";var r=n(172),a="function"==typeof Symbol&&Symbol.for,o=a?Symbol.for("react.element"):60103,i=a?Symbol.for("react.portal"):60106,l=a?Symbol.for("react.fragment"):60107,c=a?Symbol.for("react.strict_mode"):60108,s=a?Symbol.for("react.profiler"):60114,b=a?Symbol.for("react.provider"):60109,u=a?Symbol.for("react.context"):60110,p=a?Symbol.for("react.forward_ref"):60112,f=a?Symbol.for("react.suspense"):60113;a&&Symbol.for("react.suspense_list");var d=a?Symbol.for("react.memo"):60115,m=a?Symbol.for("react.lazy"):60116;a&&Symbol.for("react.fundamental"),a&&Symbol.for("react.responder"),a&&Symbol.for("react.scope");var h="function"==typeof Symbol&&Symbol.iterator;function j(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O={};function g(e,t,n){this.props=e,this.context=t,this.refs=O,this.updater=n||y}function v(){}function N(e,t,n){this.props=e,this.context=t,this.refs=O,this.updater=n||y}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(j(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var w=N.prototype=new v;w.constructor=N,r(w,g.prototype),w.isPureReactComponent=!0;var k={current:null},S={current:null},C=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,n){var r,a={},i=null,l=null;if(null!=t)for(r in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)C.call(t,r)&&!_.hasOwnProperty(r)&&(a[r]=t[r]);var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){for(var s=Array(c),b=0;b<c;b++)s[b]=arguments[b+2];a.children=s}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===a[r]&&(a[r]=c[r]);return{$$typeof:o,type:e,key:i,ref:l,props:a,_owner:S.current}}function x(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var A=/\/+/g,E=[];function P(e,t,n,r){if(E.length){var a=E.pop();return a.result=e,a.keyPrefix=t,a.func=n,a.context=r,a.count=0,a}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>E.length&&E.push(e)}function I(e,t,n){return null==e?0:function e(t,n,r,a){var l=typeof t;"undefined"!==l&&"boolean"!==l||(t=null);var c=!1;if(null===t)c=!0;else switch(l){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case o:case i:c=!0}}if(c)return r(a,t,""===n?"."+F(t,0):n),1;if(c=0,n=""===n?".":n+":",Array.isArray(t))for(var s=0;s<t.length;s++){var b=n+F(l=t[s],s);c+=e(l,b,r,a)}else if(null===t||"object"!=typeof t?b=null:b="function"==typeof(b=h&&t[h]||t["@@iterator"])?b:null,"function"==typeof b)for(t=b.call(t),s=0;!(l=t.next()).done;)c+=e(l=l.value,b=n+F(l,s++),r,a);else if("object"===l)throw r=""+t,Error(j(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return c}(e,"",t,n)}function F(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function $(e,t){e.func.call(e.context,t,e.count++)}function L(e,t,n){var r=e.result,a=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?M(e,r,n,(function(e){return e})):null!=e&&(x(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,a+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),r.push(e))}function M(e,t,n,r,a){var o="";null!=n&&(o=(""+n).replace(A,"$&/")+"/"),I(e,L,t=P(t,o,r,a)),R(t)}function z(){var e=k.current;if(null===e)throw Error(j(321));return e}var B={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return M(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;I(e,$,t=P(null,null,t,n)),R(t)},count:function(e){return I(e,(function(){return null}),null)},toArray:function(e){var t=[];return M(e,t,null,(function(e){return e})),t},only:function(e){if(!x(e))throw Error(j(143));return e}},createRef:function(){return{current:null}},Component:g,PureComponent:N,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:b,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:p,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return z().useCallback(e,t)},useContext:function(e,t){return z().useContext(e,t)},useEffect:function(e,t){return z().useEffect(e,t)},useImperativeHandle:function(e,t,n){return z().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return z().useLayoutEffect(e,t)},useMemo:function(e,t){return z().useMemo(e,t)},useReducer:function(e,t,n){return z().useReducer(e,t,n)},useRef:function(e){return z().useRef(e)},useState:function(e){return z().useState(e)},Fragment:l,Profiler:s,StrictMode:c,Suspense:f,createElement:T,cloneElement:function(e,t,n){if(null==e)throw Error(j(267,e));var a=r({},e.props),i=e.key,l=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(l=t.ref,c=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(b in t)C.call(t,b)&&!_.hasOwnProperty(b)&&(a[b]=void 0===t[b]&&void 0!==s?s[b]:t[b])}var b=arguments.length-2;if(1===b)a.children=n;else if(1<b){s=Array(b);for(var u=0;u<b;u++)s[u]=arguments[u+2];a.children=s}return{$$typeof:o,type:e.type,key:i,ref:l,props:a,_owner:c}},createFactory:function(e){var t=T.bind(null,e);return t.type=e,t},isValidElement:x,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:k,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r}},D={default:B},U=D&&B||D;e.exports=U.default||U},172:function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,t){for(var n,l,c=i(e),s=1;s<arguments.length;s++){for(var b in n=Object(arguments[s]))a.call(n,b)&&(c[b]=n[b]);if(r){l=r(n);for(var u=0;u<l.length;u++)o.call(n,l[u])&&(c[l[u]]=n[l[u]])}}return c}}}]);